<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="{{ url_for('static', filename='js/muuri.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/web-animations.min.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/reset.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <title>おっとなったもの</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&family=Rubik&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rubik&display=swap" rel="stylesheet">
</head>

<body>
    {% for i in range(3) %}
        <div class="button"><p>タイトル</p></div>
        <div class="grid muuri grid{{i}}">
            {% for n in range(10) %}
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image1.JPG') }}">
            </div>
            {% endfor %}
        </div>
    {% endfor %}   
    
    <div class="grid muuri grid0">
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image1.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image2.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image3.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image4.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image5.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image6.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image1.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image2.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image3.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image4.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image5.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image6.JPG') }}">
            </div>
        </div>
    </div>
    <div class="button">
        <p>建築</p>
    </div>
    <div class="grid muuri grid1">
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image1.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image2.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image3.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image4.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image5.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image6.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image1.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image2.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image3.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image4.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image5.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image6.JPG') }}">
            </div>
        </div>
    </div>
    <div class="button">
        <p>建築</p>
    </div>
    <div class="grid muuri grid2">
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image1.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image2.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image3.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image4.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image5.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image6.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image1.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image2.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image3.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image4.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image5.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image6.JPG') }}">
            </div>
        </div>
    </div>
    <div class="button">
        <p>建築</p>
    </div>
    <div class="grid muuri grid3">
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image1.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image2.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image3.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image4.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image5.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image6.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image1.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image2.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image3.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image4.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image5.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image6.JPG') }}">
            </div>
        </div>
    </div>
    <div class="button">
        <p>建築</p>
    </div>
    <div class="grid muuri grid4">
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image1.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image2.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image3.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image4.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image5.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image6.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image1.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image2.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image3.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image4.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image5.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image6.JPG') }}">
            </div>
        </div>
    </div>
    <div class="button">
        <p>建築</p>
    </div>
    <div class="grid muuri grid5">
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image1.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image2.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image3.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image4.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image5.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image6.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image1.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image2.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image3.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image4.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image5.JPG') }}">
            </div>
        </div>
        <div class="item">
            <div class="item-content">
                <img src="{{ url_for('static', filename='image/image6.JPG') }}">
            </div>
        </div>
    </div>

</body>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"
    integrity="sha256-6XMVI0zB8cRzfZjqKcD01PBsAy3FlDASrlC8SxCpInY=" crossorigin="anonymous"></script>


<script src="{{ url_for('static', filename='js/move.js') }}"></script>
<script>
    function makeList(n) {
        list = []
        for(var i = 0; i<n; i++) {
            list.push(".grid"+i)
        }
        console.log(list)
        return list
    }
    function makeNewMuuri(list) {
        for (var number = 0; number < list.length; number++) {
            var grid = new Muuri(list[number], {
                dragEnabled: true,
                layout: function (grid, layoutId, items, width, height, callback) {

                    var layout = {
                        id: layoutId,
                        items: items,
                        slots: [],
                        styles: {},
                    };

                    var item;
                    var m;
                    var x = 0;
                    var y = 0;
                    var w = 0;
                    var h = 0;

                    var maxW = width / 2;
                    var currentW = 0;
                    var currentRowH = 0;
                    var currentRowW = 0;
                    var rowSizes = [];
                    var rowFixes = [];

                    var xPre, yPre, wPre, hPre;
                    var numToFix = 0;

                    for (var i = 0; i < items.length; i++) {
                        item = items[i];

                        m = item.getMargin();
                        wPre = item.getWidth() + m.left + m.right;
                        hPre = item.getHeight() + m.top + m.bottom;
                        xPre += wPre;

                        if (hPre > currentRowH) {
                            currentRowH = hPre;
                        }

                        if (w < currentRowW) {
                            currentRowW = wPre;
                        }

                        rowSizes.push(width / 2);
                        numToFix++;
                        currentW += wPre;

                        var k = 0;

                        for (var j = 0; j < numToFix; j++) {
                            rowSizes[i - j] -= wPre / 2;
                        }

                        if (numToFix > 1) {
                            rowSizes[i] -= (wPre / 2) * (numToFix - 1);
                            k += (wPre / 2);
                        }

                        currentW -= k;
                        rowFixes.push(k);

                        if (currentW >= maxW) {
                            yPre += currentRowH;
                            currentRowH = 0;
                            xPre = 0;
                            numToFix -= 1;
                            currentW = 0;
                            numToFix = 0;
                            k = 0;
                        }
                    }

                    maxW = width / 2;
                    currentW = 0;
                    currentRowH = 0;
                    currentRowW = 0;

                    for (var i = 0; i < items.length; i++) {
                        item = items[i];
                        x += w;

                        if (h > currentRowH) {
                            currentRowH = h;
                        }

                        if (w < currentRowW) {
                            currentRowW = w;
                        }

                        currentW += w - rowFixes[i];

                        if (currentW >= maxW) {
                            y += currentRowH;
                            currentRowH = 0;
                            x = 0;
                            currentW = 0;
                        }

                        m = item.getMargin();
                        w = item.getWidth() + m.left + m.right;
                        h = item.getHeight() + m.top + m.bottom;
                        layout.slots.push(x + rowSizes[0], y);
                        console.log(x)
                    }

                    layout.styles.width = '100%';
                    layout.styles.height = y + h + 1 + 'px';

                    callback(layout);
                    console.log(layout)
                    console.log(rowSizes)
                }
            });
        }
    }
    makeNewMuuri(makeList(6))

</script>

</html>